---
layout: post
title: ! 'WordPressからmiddlemanに移行した'
published: false
date: 2013-09-12
comments: true
tags:
- Middleman
- github
- blog
- Pure
---

こっそりとサイトをリニューアルしていました。  
今回はWordPressからmiddleman-blogに乗り換えました。  
ホスティングもロリポップからgithub-pagesに乗り換え。  
理由は普段使っているエディタでmarkdownでブログを書いてgitでデプロイする流れがやりたかったから。  
static site generatorは数あれど、慣れたmiddlemanでやってしまおうと思っていました。  
haml × sassでコーディングしました。slimもやりたかったけどまだ不慣れなので次回…。  

今回リニューアルするのにとった流れか下記の通りです。

1. WordPressからデータをmarkdown形式でブッコ抜く
2. Pureを少し使ってmiddleman-blogでコーディング
3. githubにorganizationアカウントを作る
4. TLDでDNSの変更

## 1. WordPressからデータをmarkdown形式でブッコ抜く

WordPressからxmlをexportしておく。
[Octopress - WordPress から投稿データを移行！](http://www.mk-mode.com/octopress/2012/12/20/octopress-migration-from-wordpress/)の記事を参考にWpXml2Mdを使ってxmlからmarkdownにコンバートする。
wp-content/uploads/の画像をsource/images/にコピーする。
表示おかしいところなどを確認して直す。

## 2. Pureを少し使ってmiddleman-blogでコーディング

グリッドとページングのところにPureを使いました。@yterajimaさんのgemが便利です→。
markdownはredcarpet、Syntax-Hilightはmiddleman-rouge、コメントはmiddleman-disqusのgemを使いました。

## 3. githubにorganizationアカウントを作る

ドメインを割り当てたい場合の対策です。
ユーザーアカウントにプロジェクトリポジトリを作成した場合は、masterブランチをdeployするとgh-pagesブランチが生成されてそこにbuildしたファイルがdeployされます。
http://username.github.io/projectnameでgh-pagesブランチのファイルが表示されるはずです。
ドメインを割り当てる場合は、username.github.ioという名前でリポジトリを作成してそこにドメインを書いたCNAMEファイルを置きます。
github pagesのカスタムドメインは1ユーザにつき1つしか設定できないので、今回はcamuro.org用にcamuroというorganizationアカウントを作りました

```ruby
activate :deploy do |deploy|
  deploy.method = :git
  deploy.branch = 'master'
end
```


しかしドメインを割り当てたい場合は
<key></key>

