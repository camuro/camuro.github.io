<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0' name='viewport'>
<title>BLOG | CAMURO</title>
<link href="../../stylesheets/normalize.css" rel="stylesheet" /><link href="../../stylesheets/all.css" rel="stylesheet" /><link href="../../stylesheets/highlight.css" rel="stylesheet" /><link href="http://yui.yahooapis.com/pure/0.2.1/pure-min.css" rel="stylesheet" />
<script src="../../javascripts/all.js"></script>
<script src="../../javascripts/libs/modernizr-2.6.1.min.js"></script><script src="../../javascripts/mylibs/html5.js"></script><script src="../../javascripts/mylibs/selectivizr-min.js"></script><script src="../../javascripts/mylibs/smoothScroll.js"></script>
</head>
<body class='blog blog_page blog_page_3'>
<div class='pure-g-r' id='layout'>
<div class='sidebar pure-u'>
<div class='menu-box'>
<a class='heading' href='/'>
camuro
</a>
<nav>
<ul class='menu cl-effect-5'>
<li class='menu-item'>
<a href='/'>
<span data-hover='Home'>Home</span>
</a>
</li>
<li class='menu-item'>
<a href='/about.html'>
<span data-hover='About'>About</span>
</a>
</li>
<li class='menu-item'>
<a href='/works.html'>
<span data-hover='Works'>Works</span>
</a>
</li>
<li class='menu-item'>
<a href='/blog.html'>
<span data-hover='Blog'>Blog</span>
</a>
</li>
</ul>
</nav>
<form>
<input class='st-search-input' id='st-search-input' type='text'>
</form>
<script>
  var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'gGZQLNj5d36eyibDuysX';
  
      /** DO NOT EDIT BELOW THIS LINE **/
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = "//s.swiftypecdn.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      entry.parentNode.insertBefore(script, entry);
    }());
</script>
</div>

</div>
<div class='pure-u-1'>
<div class='main'>
<section class='post'>
<div class='post-head'>
<h2>
<a href="/blog/2013/04/19233343.html">リモートインターン ｜ MIddleman 実践（3）- ブログレイアウトと入れ子レイアウト</a>
</h2>
<div class='date'>
<time>Apr 19 2013</time>
<ul class='tags'>
</ul>
</div>
</div>
<div class='post-body'>
<p>参考 - <a href="http://middleman-guides.e2esound.com/blogging/" title="Middleman:ブログ機能">Middleman:ブログ機能</a>
今回はブログ機能を付けていたときに躓いたことについて書いていきます。</p>

<p>config.rbにブログ機能のオプションを色々と書くことができる。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># blog</span>
<span class="n">activate</span> <span class="ss">:blog</span> <span class="k">do</span> <span class="o">|</span><span class="n">blog</span><span class="o">|</span>
  <span class="c1"># ブログ機能のオプションを設定</span>
  <span class="no">Time</span><span class="p">.</span><span class="nf">zone</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="no">Tokyo</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="c1"># タイムゾーン</span>
  <span class="n">blog</span><span class="p">.</span><span class="nf">prefix</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">blog</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="c1"># カスタムパス</span>
  <span class="n">blog</span><span class="p">.</span><span class="nf">permalink</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="sr">/:year/</span><span class="ss">:month</span><span class="o">/</span><span class="ss">:day</span><span class="o">/</span><span class="ss">:title</span><span class="p">.</span><span class="nf">html</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="c1"># パーマリンク</span>
  <span class="n">blog</span><span class="p">.</span><span class="nf">per_page</span> <span class="o">=</span> <span class="mi">5</span> <span class="c1"># ページあたりの記事数</span>
  <span class="n">blog</span><span class="p">.</span><span class="nf">paginate</span> <span class="o">=</span> <span class="kp">true</span> <span class="c1"># ページネーションを有効化する場合には true を設定</span>
  <span class="n">blog</span><span class="p">.</span><span class="nf">layout</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">layouts</span><span class="o">/</span><span class="n">blog_layout</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="c1"># 全ての記事に使用される特定のレイアウトを設定</span>
<span class="k">end</span>
</code></pre></div></div>

<!--more-->
<p><strong>ブログレイアウトの指定方法</strong></p>

<p>方法１．ブログ用のレイアウトをlayoutsディレクトリ作ってその配下にarticle_layout.hamlという名前などで作る。(元のerbでもいいけどhamlでやってます。)</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">blog</span><span class="p">.</span><span class="nf">layout</span> <span class="o">=</span> <span class="s2">"layouts/article_layout"</span>
</code></pre></div></div>

<p>方法２．ブログレイアウトの指定は<a href="http://middleman-guides.e2esound.com/templates/#toc_4" title="入れ子レイアウト">入れ子レイアウト</a>も使えるらしい。
同様にconfig.rbのブログオプションの箇所でレイアウトの指定を下記のように書き換える。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">page</span> <span class="s2">"blog/*"</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="ss">:article_layout</span>
</code></pre></div></div>

<p>ここで問題。
layoutsディレクトリを作る、ということで私はここで勝手に元のlayout.hamlもlayoutsディレクトリに入れてしまった。
こうしてしまうとパーシャルを含むブログレイアウトの指定を入れ子レイアウトにした場合、ヘッダーやフッターのパーシャルをうまく読み込んでくれない。
あくまでsource/layout.hamlが基本で、そこからsource/layouts/article_layout.hamlを入れ子にするという考え方が正しい。</p>

<p>原因が分からず、source/layouts/layout.hamlはブログ以外のページ用のレイアウトとしてそのまま残し、source/layouts/article_layout.hamlにはヘッダーやフッターのパーシャルにしないで直書き…というキモいやり方でとりあえず動かしてしまっていた。</p>

<p>今回この記事書くために改めて検証してみて、原因が分かりました…とほほ。
<a href="https://github.com/kumanoayumi/middleman-blog" title="今回検証する用に作ったコードをGithubに上げておきます。→">今回検証する用に作ったコードをGithubに上げておきます。→</a></p>

</div>
</section>
<section class='post'>
<div class='post-head'>
<h2>
<a href="/blog/2013/04/13005809.html">リモートインターン | Amazonギフト券のデザインを作る</a>
</h2>
<div class='date'>
<time>Apr 13 2013</time>
<ul class='tags'>
</ul>
</div>
</div>
<div class='post-body'>
<p>今日は「Amazonギフト券のデザインが欲しい」の作業しました。
（怖話では毎月一番怖かった話に送られる<a href="http://kowabana.jp/rankings/award" title="怖話アワード">怖話アワード</a>という企画があって、選ばれた怖い話を投稿した作者の方には5,000円分のAmazonギフト券がメールで送られます。）</p>

<p>このへんの記事を参考に
<a href="http://photoshopvip.net/archives/17494" title="Photoshopでざらざらのノイズテクスチャをデザインする方法">Photoshopでざらざらのノイズテクスチャをデザインする方法</a>
<a href="http://weblog.weska.jp/2009/02/photoshopplayingcard.html" title="Photoshop｜よごれて古い感じのトランプの作り方チュートリアル">Photoshop｜よごれて古い感じのトランプの作り方チュートリアル</a></p>

<p>作ったものがコレです。</p>

<p><a href="../../images/2013/04/amazon-gift-image.png"><img class="alignnone size-medium wp-image-590" alt="amazon-gift-image" src="../../images/2013/04/amazon-gift-image-300x112.png" width="300" /></a></p>

<p>グランジ系のブラシは重宝しそうです。</p>

</div>
</section>
<section class='post'>
<div class='post-head'>
<h2>
<a href="/blog/2013/04/11001958.html">リモートインターン | 「怖いボタン」の押された状態の見た目を作る</a>
</h2>
<div class='date'>
<time>Apr 11 2013</time>
<ul class='tags'>
</ul>
</div>
</div>
<div class='post-body'>
<p>今日は怖話の怖いボタンについて「怖いを押してある場合はそれとわかる見た目が欲しい」の作業をしました。</p>

<p>これを</p>

<p><a href="../../images/2013/04/8fa25729ceea79e94a296bf30a2557a2.png"><img class="alignnone size-medium wp-image-582" alt="8fa25729ceea79e94a296bf30a2557a2" src="../../images/2013/04/8fa25729ceea79e94a296bf30a2557a2-300x37.png" width="300" /></a></p>

<p>こんな感じで。</p>

<p><a href="../../images/2013/04/9927d89925864bc9d0e04a3e0770e880.png"><img class="alignnone size-medium wp-image-583" alt="9927d89925864bc9d0e04a3e0770e880" src="../../images/2013/04/9927d89925864bc9d0e04a3e0770e880-300x68.png" width="300" height="68" /></a></p>

<p>mixin用の_mixin.css.sassに書かれていたボタンのスタイルにvisitedの擬似クラスに押された感じのスタイルを追加。</p>

<p>既に押したかどうかの動きは他のhelper?（stories_helperかな。）かなんか触らないとつけられなさそうだったので
とりあえず今日はここまで。
動きは誰にお願いすればよいのだろうか…。</p>

</div>
</section>
<section class='post'>
<div class='post-head'>
<h2>
<a href="/blog/2013/04/04004648.html">リモートインターン ｜ MIddleman 実践（2）</a>
</h2>
<div class='date'>
<time>Apr  4 2013</time>
<ul class='tags'>
</ul>
</div>
</div>
<div class='post-body'>
<p>引き続きmiddlemanです。</p>

<p>HTML5 Boilerplate 4.0, Sass, Compass と レスポンシブレイアウト対応の Susyに対応している<a href="https://github.com/nathos/amicus" title="Amicus">Amicus</a>を使ってみた。</p>

<p>以下手順。bundlerが入ってる状態からスタート。
ローカルにamicusをクローン</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone http://github.com/nathos/amicus.git my_new_project
</code></pre></div></div>

<p>Gemfileをinstall</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle install
</code></pre></div></div>

<p>サーバーを立ち上げる</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ middleman
</code></pre></div></div>

<p>グリッド表示されたレスポンシブなページが生成される。
レイアウトに関しては<a href="http://susy.oddbird.net/" title="Susy">Susy</a>の公式を参考に。
まだ掘り下げられてないので後日まとめたい。</p>

<p>AmicusはHamlで書かれていた。
Amicusにブログ付けようとしたが、middlemanのブログテンプレートはデフォルトでERbだったので、ERbをHamlに変換したかった。
ここで躓いて@machidaさんにhtml2hamlの<a href="http://html2haml.heroku.com/" title="サイト">サイト</a>と<a href="https://github.com/haml/html2haml" title="gem">gem</a>を教えていただいた。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ html2haml [options] [INPUT] [OUTPUT]
</code></pre></div></div>

<p>でいけるので、今回は</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ html2haml -e blog.html.erb blog.html.haml
</code></pre></div></div>

<p>でERbからHamlにめでたくコンバートできた。</p>

</div>
</section>
<section class='post'>
<div class='post-head'>
<h2>
<a href="/blog/2013/03/09015009.html">リモートインターン ｜ MIddleman 実践（1）</a>
</h2>
<div class='date'>
<time>Mar  9 2013</time>
<ul class='tags'>
</ul>
</div>
</div>
<div class='post-body'>
<p>引き続きMiddlemanの学習です。
リファレンスを読んでるだけだと頭に入ってこないので、実際にレイアウト組みながら学習することにしました。
今回作るサイトのテーマはチートシートです。
ざっくりphotoshopでデザインしたもの</p>

<p><a href="../../images/2013/03/0f9d88346a601c859d5154d515fff876.png" target="_blank"><img class="alignnone size-medium wp-image-543" alt="スクリーンショット 2013-03-09 0.12.09" src="../../images/2013/03/0f9d88346a601c859d5154d515fff876-300x146.png" width="300" /></a></p>

<p>今日できるところまでコーディングしたもの</p>

<p><a href="../../images/2013/03/3072465c3bdb1f2fc4e8336ecfe2e0be.png" target="_blank"><img class="alignnone size-medium wp-image-542" alt="スクリーンショット 2013-03-09 0.10.46" src="../../images/2013/03/3072465c3bdb1f2fc4e8336ecfe2e0be-300x176.png" width="300" /></a></p>

<p>ブログ機能を使ってタグをグローバルナビにしてタグ毎の記事一覧をサイドナビに表示したい。</p>

<p><strong>前回躓いたけど解決した問題</strong>
sassを書いてもbuildしない限りはコンパイルされないのでcssの表示確認が面倒だな…と思ってたけど<a href="http://middleman-guides.e2esound.com/helpers/" title="アセットヘルパ">アセットヘルパ</a>で解決した。（躓いた理由は、リファレンス読書不足。）
例えばstyle.css.sassの場合、普通のhtmlだとstylesheetのリンクは下記のように書くけど</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"stylesheets/style.css"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>アセットヘルパを使う場合は下記のような記述で良い。</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s1">'style'</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>これならbuildせずともリロードでcssが反映されるので、LiveReloadの力も借りてsassファイル保存→即ブラウザ反映の確認ができる。とても捗る。</p>

<p><strong>パーシャル</strong>
ヘッダーのグローバルナビとサイドナビとフッターと記事の整形をして、パーシャルというのを使ってみた。
普段phpを触っているので、これがincludeにあたるところか…と思った。
_header.erb、_side.erb、_footer.erbのようにファイルを命名する。
例えば下記のようなコードを_footer.erbとして保存。</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;footer&gt;</span>
  Copyright 2013 hoge
<span class="nt">&lt;/footer&gt;</span>
</code></pre></div></div>

<p>layout.erbで該当箇所に下記のように記述する。</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">partial</span> <span class="s2">"footer"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>ファイルの接頭にアンダースコアを入れるのは、sassで他のsassファイルをimportして結合したいときと似ていてしっくりきた。</p>

<p>この記事書いてるうちにまた少し調整した。</p>

<p><a href="../../images/2013/03/4dfc72382e6c74ec3a1755a4946fb661.png" target="_blank"><img class="alignnone size-medium wp-image-563" alt="スクリーンショット 2013-03-09 1.46.48" src="../../images/2013/03/4dfc72382e6c74ec3a1755a4946fb661-300x142.png" width="300" /></a></p>

<p>タグの記事一覧はどうやってやろう…。見た目は詰まってる感じがあるので追々微調整する。</p>

</div>
</section>
<div class='paging-module'>
<ul class='pure-paginator'>
<li>
<a href="/blog/page/2.html"><div class='paging pure-button prev'>
&lt;
<!-- %i.icon-chevron-left -->
</div>
</a></li>
<li>
<a href="/blog/page/4.html"><div class='paging pure-button next'>
&gt;
<!-- %i.icon-chevron-right -->
</div>
</a></li>
</ul>
</div>

</div>
</div>
</div>
<script src="../../javascripts/mylibs/google.js"></script>
</body>
</html>
